{"version":3,"file":"AddressField.js","sourceRoot":"","sources":["../../ts/components/AddressField.tsx"],"names":[],"mappings":";AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,iBAAiB,CAAA;AAC3C,OAAO,EAAE,MAAM,EAAE,MAAM,cAAc,CAAA;AAErC,OAAO,EAAE,uBAAuB,EAAE,MAAM,yBAAyB,CAAA;AACjE,OAAO,KAAK,IAAI,MAAM,iBAAiB,CAAA;AAWvC,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,KAAY,EAAE,EAAE;IAC5C,MAAM,QAAQ,GAAG,MAAM,CAAmB,IAAI,CAAC,CAAA;IAC/C,MAAM,OAAO,GAAG,SAAS,CAAU,IAAI,CAAC,CAAA;IAExC,MAAM,WAAW,GAAG,GAAG,EAAE;QACxB,KAAK,CAAC,OAAO,EAAE,EAAE,CAAA;QACjB,QAAQ,CAAC,OAAO,EAAE,KAAK,EAAE,CAAA;IAC1B,CAAC,CAAA;IAED,MAAM,WAAW,GAAG,CAAC,CAAsC,EAAE,EAAE;QAC9D,MAAM,UAAU,GAAG,QAAQ,CAAC,OAAO,CAAA;QACnC,MAAM,KAAK,GAAG,CAAC,CAAC,aAAa,CAAC,KAAK,CAAA;QAEnC,IAAI,UAAU,KAAK,IAAI;YAAE,OAAM;QAE/B,sCAAsC;QACtC,UAAU,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAA;QAChC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA;QAEpB,OAAO,CAAC,KAAK,GAAG,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAA;QACzC,IAAI,UAAU,CAAC,QAAQ,CAAC,eAAe,EAAE;YACxC,UAAU,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,CAAA;SACnD;IACF,CAAC,CAAA;IAED,OAAO,CACN,cAAK,KAAK,EAAE,uBAAuB,CAAC,WAAW,CAAC,IAAI,EAAE,OAAO,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC,4CAA4C,CAAC,CAAC,CAAC,8CAA8C,EAAE,KAAK,CAAC,QAAQ,IAAI,YAAY,CAAC,YAC7M,eAAK,KAAK,EAAC,6CAA6C,aACvD,eAAK,KAAK,EAAC,WAAW,aACrB,gBAAO,KAAK,EAAC,qCAAqC,YAAE,KAAK,CAAC,KAAK,GAAS,EACxE,gBAAO,GAAG,EAAE,QAAQ,EAAE,WAAW,EAAE,KAAK,CAAC,WAAW,EAAE,OAAO,EAAC,6BAA2B,EAAC,KAAK,EAAE,WAAW,CAAC,KAAK,EAAE,IAAI,EAAC,MAAM,EAAC,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE,OAAO,EAAE,WAAW,EAAE,QAAQ,EAAE,KAAK,CAAC,QAAQ,EAAE,QAAQ,SAAG,IAC1M,EACL,KAAK,CAAC,KAAK,KAAK,EAAE,IAAI,CACtB,iBAAQ,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAC,gGAAgG,EAAC,OAAO,EAAE,WAAW,EAAE,QAAQ,EAAE,KAAK,CAAC,QAAQ,YAC1K,KAAC,IAAI,CAAC,KAAK,KAAG,GACN,CACT,IACI,GACD,CACN,CAAA;AACF,CAAC,CAAA;AAED,MAAM,WAAW,GAAG;IACnB,IAAI,EAAE,+CAA+C;IACrD,KAAK,EAAE,2DAA2D;CAClE,CAAA","sourcesContent":["import { useSignal } from '@preact/signals'\nimport { useRef } from 'preact/hooks'\nimport { JSX } from 'preact/jsx-runtime'\nimport { removeNonStringsAndTrim } from '../library/utilities.js'\nimport * as Icon from './Icon/index.js'\n\ntype Props = {\n\tlabel: string\n\tplaceholder?: string\n\tvalue: string\n\tonInput: (address: string) => void\n\tonClear: () => void\n\tdisabled?: boolean\n}\n\nexport const AddressField = (props: Props) => {\n\tconst inputRef = useRef<HTMLInputElement>(null)\n\tconst isValid = useSignal<boolean>(true)\n\n\tconst handleClear = () => {\n\t\tprops.onClear?.()\n\t\tinputRef.current?.focus()\n\t}\n\n\tconst handleInput = (e: JSX.TargetedEvent<HTMLInputElement>) => {\n\t\tconst inputField = inputRef.current\n\t\tconst value = e.currentTarget.value\n\n\t\tif (inputField === null) return\n\n\t\t// clear errors and update field value\n\t\tinputField.setCustomValidity('')\n\t\tprops.onInput(value)\n\n\t\tisValid.value = inputField.validity.valid\n\t\tif (inputField.validity.patternMismatch) {\n\t\t\tinputField.setCustomValidity('Not a valid address')\n\t\t}\n\t}\n\n\treturn (\n\t\t<div class={removeNonStringsAndTrim(baseClasses.root, isValid.value === false ? 'border-red-400 focus-within:border-red-400' : 'border-white/50 focus-within:border-white/90', props.disabled && 'opacity-50')}>\n\t\t\t<div class='grid grid-cols-[1fr,auto] items-center h-16'>\n\t\t\t\t<div class='grid px-4'>\n\t\t\t\t\t<label class='text-sm text-white/50 leading-tight'>{props.label}</label>\n\t\t\t\t\t<input ref={inputRef} placeholder={props.placeholder} pattern='^\\s*0x[0-9A-Fa-f]{40}\\s*$' class={baseClasses.field} type='text' value={props.value} onInput={handleInput} disabled={props.disabled} required />\n\t\t\t\t</div>\n\t\t\t\t{props.value !== '' && (\n\t\t\t\t\t<button type='button' class='mx-2 p-2 outline-none border border-transparent focus:border-white text-sm disabled:opacity-50' onClick={handleClear} disabled={props.disabled}>\n\t\t\t\t\t\t<Icon.Xmark />\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nconst baseClasses = {\n\troot: 'border bg-transparent focus-within:bg-white/5',\n\tfield: 'h-6 bg-transparent outline-none placeholder:text-white/20',\n}\n"]}