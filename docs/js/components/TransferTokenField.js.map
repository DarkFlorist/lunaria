{"version":3,"file":"TransferTokenField.js","sourceRoot":"","sources":["../../ts/components/TransferTokenField.tsx"],"names":[],"mappings":";AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,wBAAwB,CAAA;AACpD,OAAO,EAAE,eAAe,EAAE,MAAM,4BAA4B,CAAA;AAC5D,OAAO,EAAE,uBAAuB,EAAE,MAAM,yBAAyB,CAAA;AACjE,OAAO,EAAE,WAAW,EAAE,eAAe,EAAE,MAAM,iBAAiB,CAAA;AAC9D,OAAO,EAAE,YAAY,EAAE,MAAM,gCAAgC,CAAA;AAE7D,MAAM,CAAC,MAAM,wBAAwB,GAAG,GAAG,EAAE;IAC5C,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,YAAY,CAA2B,IAAI,CAAC,CAAA;IAC/E,MAAM,EAAE,MAAM,EAAE,GAAG,WAAW,EAAE,CAAA;IAChC,MAAM,EAAE,KAAK,EAAE,GAAG,eAAe,EAAE,CAAA;IACnC,MAAM,EAAE,KAAK,EAAE,GAAG,WAAW,EAAE,CAAA;IAE/B,MAAM,kBAAkB,GAAG,CAAC,CAAgB,EAAE,EAAE;QAC/C,QAAQ,CAAC,CAAC,GAAG,EAAE;YACd,KAAK,EAAE,CAAC;YACR,KAAK,OAAO,CAAC;YACb,KAAK,SAAS,CAAC;YACf,KAAK,WAAW;gBACf,CAAC,CAAC,cAAc,EAAE,CAAA;gBAClB,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAA;gBACtB,MAAK;YACN;gBACC,OAAM;SACP;IACF,CAAC,CAAA;IAED,MAAM,aAAa,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CAAA;IAE9F,MAAM,uBAAuB,GAAG,GAAG,EAAE;QACpC,IAAI,CAAC,SAAS,CAAC,KAAK;YAAE,OAAM;QAC5B,IAAI,QAAQ,CAAC,aAAa,KAAK,SAAS,CAAC,KAAK;YAAE,OAAM;QACtD,IAAI,KAAK,CAAC,KAAK,KAAK,SAAS;YAAE,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,CAAA;IACvD,CAAC,CAAA;IAED,eAAe,CAAC,uBAAuB,CAAC,CAAA;IAExC,OAAO,CACN,iBAAQ,IAAI,EAAC,QAAQ,EAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,uBAAuB,CAAC,yGAAyG,EAAE,MAAM,CAAC,KAAK,IAAI,YAAY,CAAC,EAAE,SAAS,EAAE,kBAAkB,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,CAAC,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,YAC9Q,eAAK,KAAK,EAAC,wDAAwD,aAClE,eAAK,KAAK,EAAC,gBAAgB,aAC1B,cAAK,KAAK,EAAC,qCAAqC,sBAAY,EAC5D,cAAK,KAAK,EAAC,2DAA2D,YAAE,aAAa,CAAC,KAAK,CAAC,IAAI,GAAO,IAClG,EACN,eAAK,KAAK,EAAC,6DAA6D,aACvE,cAAK,KAAK,EAAC,eAAe,YAAE,aAAa,CAAC,KAAK,CAAC,MAAM,GAAO,EAC7D,KAAC,UAAU,KAAG,IACT,IACD,GACE,CACT,CAAA;AACF,CAAC,CAAA;AAED,MAAM,UAAU,GAAG,GAAG,EAAE,CAAC,CACxB,cAAK,KAAK,EAAC,KAAK,EAAC,MAAM,EAAC,KAAK,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,YAC/F,eAAM,CAAC,EAAC,ulBAAulB,EAAC,IAAI,EAAC,cAAc,GAAG,GACjnB,CACN,CAAA","sourcesContent":["import { useTransfer } from '../context/Transfer.js'\nimport { useTokenManager } from '../context/TokenManager.js'\nimport { removeNonStringsAndTrim } from '../library/utilities.js'\nimport { useComputed, useSignalEffect } from '@preact/signals'\nimport { useSignalRef } from '../library/preact-utilities.js'\n\nexport const TransferTokenSelectField = () => {\n\tconst { ref, signal: buttonRef } = useSignalRef<HTMLButtonElement | null>(null)\n\tconst { isBusy } = useTransfer()\n\tconst { stage } = useTokenManager()\n\tconst { input } = useTransfer()\n\n\tconst activateOnKeypress = (e: KeyboardEvent) => {\n\t\tswitch (e.key) {\n\t\t\tcase '':\n\t\t\tcase 'Enter':\n\t\t\tcase 'ArrowUp':\n\t\t\tcase 'ArrowDown':\n\t\t\t\te.preventDefault()\n\t\t\t\tstage.value = 'select'\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\treturn\n\t\t}\n\t}\n\n\tconst selectedAsset = useComputed(() => input.value.token || { name: 'Ether', symbol: 'ETH' })\n\n\tconst focusButtonOnClearStage = () => {\n\t\tif (!buttonRef.value) return\n\t\tif (document.activeElement === buttonRef.value) return\n\t\tif (stage.value === undefined) buttonRef.value.focus()\n\t}\n\n\tuseSignalEffect(focusButtonOnClearStage)\n\n\treturn (\n\t\t<button type='button' ref={ref} class={removeNonStringsAndTrim('border border-white/50 bg-transparent outline-none focus-within:border-white/80 focus-within:bg-white/5', isBusy.value && 'opacity-50')} onKeyDown={activateOnKeypress} onClick={() => (stage.value = 'select')}>\n\t\t\t<div class='grid grid-cols-[1fr,auto] gap-4 items-center px-4 h-16'>\n\t\t\t\t<div class='grid text-left'>\n\t\t\t\t\t<div class='text-sm text-white/50 leading-tight'>Asset</div>\n\t\t\t\t\t<div class='appearance-none outline-none h-6 bg-transparent text-left'>{selectedAsset.value.name}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class='grid grid-cols-[min-content,min-content] items-center gap-3'>\n\t\t\t\t\t<div class='text-white/50'>{selectedAsset.value.symbol}</div>\n\t\t\t\t\t<SwitchIcon />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</button>\n\t)\n}\n\nconst SwitchIcon = () => (\n\t<svg width='1em' height='1em' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'>\n\t\t<path d='M.75 0A.75.75 0 0 0 0 .75v2.5A.75.75 0 0 0 .75 4h2.5A.75.75 0 0 0 4 3.25V.75A.75.75 0 0 0 3.25 0H.75Zm7.226 4.624a.6.6 0 1 0 .848-.848L8.048 3H10.5a.3.3 0 0 1 .3.3v2.1a.6.6 0 1 0 1.2 0V3.3a1.5 1.5 0 0 0-1.5-1.5H8.048l.776-.776a.6.6 0 0 0-.848-.848l-1.8 1.8a.6.6 0 0 0 0 .848l1.8 1.8ZM4.024 7.376a.6.6 0 0 0-.848.848L3.952 9H1.5a.3.3 0 0 1-.3-.3V6.6a.6.6 0 1 0-1.2 0v2.1a1.5 1.5 0 0 0 1.5 1.5h2.452l-.776.776a.6.6 0 1 0 .848.848l1.8-1.8a.6.6 0 0 0 0-.848l-1.8-1.8Zm7.756 4.404a.75.75 0 0 0 .22-.53v-2.5a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 0-.75.75v2.5a.75.75 0 0 0 .75.75h2.5a.75.75 0 0 0 .53-.22Z' fill='currentColor' />\n\t</svg>\n)\n"]}